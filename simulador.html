<!DOCTYPE html>
<html>
<title>W3.CSS</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
	<body>
    	Valor da venda:R$ <input class="w3-input w3-border w3-round-xxlarge" type="text" name="valor_unitario" id="valor_unitario" onChange="update()"/>
		Selecione a quantidade de parcelas<select class="w3-select" id="parcela" onChange="update()">
        <option value="" selected>Selecione...
        <option value="Débito">Débito
        <option value="Crédito">Crédito
        <option value="2">2
        <option value="3">3
        <option value="4">4
        <option value="5">5
        <option value="6">6
		<option value="7">7
        <option value="8">8
        <option value="9">9
        <option value="10">10
        <option value="11">11
		<option value="12">12
      </select>	
	    <br>
		<type="text" id="value">
		<br>
		<p>
		<label>Valor a Cobrar:R$</label>
		<input class="w3-input w3-border w3-round-xxlarge" type="text" id="text">
		<br>
		<p>
        <label>Valor da Parcela:R$</label>
		<input class="w3-input w3-border w3-round-xxlarge" type="text" id="text1">
		<p>
        <label>RECEBIMENTOS</label></p>
		<p>
		<label>CLIENTE (70 %):R$</label>
		<input class="w3-input w3-border w3-round-xxlarge" type="text" id="text2">
		<p>
        <label>LOJA (30 %):R$</label>
        <input class="w3-input w3-border w3-round-xxlarge" type="text" id="text3">

		<script type="text/javascript">
		
		var dict = {
					taxa_d: 0.9,
					taxa_c: 1.7,
					taxa_2: 3.87,
					taxa_3: 4.45,
					taxa_4: 5.03,
					taxa_5: 5.60,
					taxa_6: 6.17,
					taxa_7: 6.73,
					taxa_8: 7.29,
					taxa_9: 7.85,
					taxa_10: 8.40,
					taxa_11: 8.94,
					taxa_12: 9.45
				};
				
			function update() {
				
				var select = document.getElementById('parcela');
				var option = select.options[select.selectedIndex];	
            	var valor_da_venda = document.getElementById('valor_unitario').value.toString().replace(",", ".")
            
            	document.getElementById('text2').value = ((valor_da_venda*0.7).toFixed(2)).toString().replace(".", ",")
            	document.getElementById('text3').value = (valor_da_venda*0.3).toFixed(2).toString().replace(".", ",")
             
           
				switch(document.getElementById('value').value = option.value){
		
					case 'Débito':
						var valor_a_cobrar =  valorCobrar(dict.taxa_d,valor_da_venda);
						var cobrar = document.getElementById('text').value = valor_a_cobrar.toString().replace(".", ",");
						document.getElementById('text1').value = " ";
					break;
					
					case 'Crédito':
						var valor_a_cobrar =  valorCobrar(dict.taxa_c,valor_da_venda);
						var cobrar = document.getElementById('text').value = valor_a_cobrar.toString().replace(".", ",");
						document.getElementById('text1').value = nParcelas(valor_a_cobrar,1);	
					break;
					
					case '2':
						var valor_a_cobrar =  valorCobrar(dict.taxa_2,valor_da_venda);
						var cobrar = document.getElementById('text').value = valor_a_cobrar.toString().replace(".", ",");
						document.getElementById('text1').value = nParcelas(valor_a_cobrar,2);	
					break;
					
					case '3':
						var valor_a_cobrar =  valorCobrar(dict.taxa_3,valor_da_venda);
						var cobrar = document.getElementById('text').value = valor_a_cobrar.toString().replace(".", ",");
						document.getElementById('text1').value = nParcelas(valor_a_cobrar,3);	
					break;
					
					case '4':
						var valor_a_cobrar =  valorCobrar(dict.taxa_4,valor_da_venda);
						var cobrar = document.getElementById('text').value = valor_a_cobrar.toString().replace(".", ",");
						document.getElementById('text1').value = nParcelas(valor_a_cobrar,4);	
					break;
					
					case '5':
						var valor_a_cobrar =  valorCobrar(dict.taxa_5,valor_da_venda);
						var cobrar = document.getElementById('text').value = valor_a_cobrar.toString().replace(".", ",");
						document.getElementById('text1').value = nParcelas(valor_a_cobrar,5);	
					break;
					
					case '6':
						var valor_a_cobrar =  valorCobrar(dict.taxa_6,valor_da_venda);
						var cobrar = document.getElementById('text').value = valor_a_cobrar.toString().replace(".", ",");
						document.getElementById('text1').value = nParcelas(valor_a_cobrar,6);	
					break;
											
					case '7':
						var valor_a_cobrar =  valorCobrar(dict.taxa_7,valor_da_venda);
						var cobrar = document.getElementById('text').value = valor_a_cobrar.toString().replace(".", ",");
						document.getElementById('text1').value = nParcelas(valor_a_cobrar,7);	
					break;
					
					case '8':
						var valor_a_cobrar =  valorCobrar(dict.taxa_8,valor_da_venda);
						var cobrar = document.getElementById('text').value = valor_a_cobrar.toString().replace(".", ",");
						document.getElementById('text1').value = nParcelas(valor_a_cobrar,8);	
					break;
					
					case '9':
						var valor_a_cobrar =  valorCobrar(dict.taxa_9,valor_da_venda);
						var cobrar = document.getElementById('text').value = valor_a_cobrar.toString().replace(".", ",");
						document.getElementById('text1').value = nParcelas(valor_a_cobrar,9);	
					break;
					
					case '10':
						var valor_a_cobrar =  valorCobrar(dict.taxa_10,valor_da_venda);
						var cobrar = document.getElementById('text').value = valor_a_cobrar.toString().replace(".", ",");
						document.getElementById('text1').value = nParcelas(valor_a_cobrar,10);	
					break;
					
					
					case '11':
						var valor_a_cobrar =  valorCobrar(dict.taxa_11,valor_da_venda);
						var cobrar = document.getElementById('text').value = valor_a_cobrar.toString().replace(".", ",");
						document.getElementById('text1').value = nParcelas(valor_a_cobrar,11);	
					break;
					
					case '12':
						var valor_a_cobrar =  valorCobrar(dict.taxa_12,valor_da_venda);
						var cobrar = document.getElementById('text').value = valor_a_cobrar.toString().replace(".", ",");
						document.getElementById('text1').value = nParcelas(valor_a_cobrar,12);	
					break;
										  
					default:
						console.log('CONDIÇÂO INVÁLIDA.');
					break;
				}

				function valorCobrar(taxa,valor_da_venda){
					var taxa = taxa/100;
					var fator = 1/(1-taxa);
					var valor_da_venda;
						return (fator*valor_da_venda).toFixed(2);
				} 

				function nParcelas(valor_a_cobrar,op){
					return op + ' parcelas de R$ ' + (valor_a_cobrar/op).toFixed(2).toString().replace(".", ",");			

				}	
			}
			update();		
		</script>
	</body>
</html>
